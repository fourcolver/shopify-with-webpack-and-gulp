var _={};_.ajax=function(e){var t,n,s,o,a,c,r={cache:!1,contentType:null,data:null,dataObject:{},headers:{},type:null,url:null,success:function(e){},error:function(e){}},m=_.extend(r,e),l=m.cache?m.url:m.url+"?ts="+Date.now().toString();function u(){var e=t.responseText;if("object"!=typeof e)try{e=JSON.parse(e)}catch(e){}200<=t.status&&t.status<400?e.status?200<=e.status&&e.status<400?m.success(e):m.error(e):m.success(e):m.error(e)}function i(){m.error(t.responseText)}return(t=new XMLHttpRequest).open(m.type,l,!0),n=t,s="application/x-www-form-urlencoded; charset=UTF-8",o=m.contentType?m.contentType:s,a=m.headers,_.isObjectEmpty(a)?n.setRequestHeader("Content-Type",o):(c=a,Object.keys(c).some(function(e){return"content-type"===e.toLowerCase()})||(a["Content-Type"]=s),Object.keys(a).forEach(function(e){n.setRequestHeader(e,a[e])})),t.onload=u,t.onError=i,void(m.data?t.send(_.objectToQueryString(m.data)):m.dataObject&&t.send(_.objectToQueryString(m.dataObject)))},_.serialize=function(e,t){if(e&&"FORM"===e.nodeName){var n,s,o=!!t,a=[],c={};for(n=e.elements.length-1;0<=n;n-=1)if(""!==e.elements[n].name)switch(e.elements[n].nodeName){case"INPUT":switch(e.elements[n].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"range":case"search":case"tel":case"time":case"url":case"week":a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].value);break;case"checkbox":case"radio":e.elements[n].checked&&(a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].value))}break;case"TEXTAREA":a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].value);break;case"SELECT":switch(e.elements[n].type){case"select-one":a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].value);break;case"select-multiple":for(s=e.elements[n].options.length-1;0<=s;s-=1)e.elements[n].options[s].selected&&(a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].options[s].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].options[s].value))}break;case"BUTTON":switch(e.elements[n].type){case"reset":case"submit":case"button":a.push(e.elements[n].name+"="+encodeURIComponent(e.elements[n].value)),c[e.elements[n].name]=encodeURIComponent(e.elements[n].value)}}return o?c:a.join("&")}},_.extend=function(n,s){return s=s||{},Object.keys(n).forEach(function(t){void 0===s[t]?s[t]=n[t]:s[t]&&_.isObject(s[t])&&Object.keys(n[t]).forEach(function(e){void 0===s[t][e]&&(s[t][e]=n[t][e])})}),s},_.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},_.isObjectEmpty=function(e){return _.isObject(e)&&0===Object.keys(e).length},_.objectToQueryString=function(e){return _.isObject(e)?_.getQueryString(e):e};var btn=document.getElementById("pwdBtn"),body=document.getElementsByTagName("body")[0],input=document.getElementById("password"),$formHeader=document.getElementById("formHeader"),$formSuccess=document.getElementById("formSuccess"),$form=document.getElementById("newsletterSignUp"),$email=document.getElementById("email"),$messages=document.getElementById("messages"),$msgSuccess=document.getElementById("messageSuccess"),$msgError=document.getElementById("messageError");function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function onSuccess(e){$form.style.display="none",$formHeader.style.display="none",$formSuccess.style.display="block"}function onError(e){}btn.addEventListener("click",function(){body.className="form-visible",input.focus()}),$form.addEventListener("submit",function(e){var t=this.getAttribute("data-ajax-submit"),n=_.serialize($form,!0);e.preventDefault(),$messages.style.display="none",validateEmail($email.value)?_.ajax({contentType:"application/json",dataObject:JSON.stringify(n),error:onError,success:onSuccess,type:"POST",url:t}):($messages.style.display="block",$msgError.style.display="block",$msgSuccess.style.display="none")});